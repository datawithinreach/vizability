<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="style.css" rel="stylesheet" type="text/css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Hanken+Grotesk:wght@300&display=swap" rel="stylesheet">
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">

  <title>My Website</title>

  <!-- Vega and Vega-Lite libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>

  <!-- Olli libraries -->
  <script src="https://cdn.jsdelivr.net/gh/datawithinreach/olli@main/docs/olli/olli.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/datawithinreach/olli@main/docs/olli/adapters.js"></script>

  <!-- Additional scripts -->
  <!-- <script type="text/javascript" src="https://chir.ag/projects/ntc/ntc.js"></script> -->
</head>

<body>
  <div class="content" role="main">
    <!-- Main header and description -->
    <h1 class="title">VizAbility - Data Visualization</h1>
    <h2>Load in a chart by selecting one of the options or upload your own file.<br>Explore the chart structure and components through a text representation.<br>Supplement your knowledge by asking questions through typing or voice input.</h2>

    <!-- File selection and upload options -->
    <div id="user-file-select">
      <div class="button-container">
        <!-- Predefined chart options -->
        <button class="dynamic-button method-1" data-value="chart1">Line Chart</button>
        <button class="dynamic-button method-1" data-value="chart2">Bar Chart</button>
        <button class="dynamic-button method-1" data-value="chart3">Scatter Plot</button>
        <button class="dynamic-button method-1" data-value="chart4">Choropleth Map</button>
        <!-- Upload file button -->
        <button class="dynamic-button" id="fileButton">Upload Local File</button>
      </div>
      <!-- Hidden file input for uploading Vega-Lite specs -->
      <input type="file" id="fileInput" class="hidden" accept=".json, .vg">
    </div>

    <!-- Containers for Vega and other visualizations -->
    <div id="vega-container" aria-hidden="true"></div>
    <div id="aria-info" aria-live="polite">
      <div id="first-container">
        <button id="toggle-olli" class="hidden">Toggle Olli</button>
        <button id="toggle-table" class="hidden">Toggle Table</button>
        <div id="olli-container" class="hidden"></div>
        <div id="table-container" class="hidden">
          <h1>Data Table</h1>
          <table id="csv-table">
              <!-- Table content will be populated here -->
          </table>
        </div>
      </div>
      <hr>
      <p id="QnA-header" style="display: none;">Supplement your knowledge of the chart by asking questions through typing or voice input.</p>
      <div id="suggestion-container" style="display: none;">
        <!-- Suggestion buttons -->
        <button class="suggestion-button" id="suggestion-button-1">Button 1</button>
        <button class="suggestion-button" id="suggestion-button-2">Button 2</button>
        <button class="suggestion-button" id="suggestion-button-3">Button 3</button>
        <button class="suggestion-button" id="suggestion-button-4">Button 4</button>
      </div>
      <!-- Form for asking questions -->
      <form class="qna-form" id="ask-question" style="display: none;">
        <div class="input-container" style="height: 50px;">
          <input id="user-query" name="user-query" type="text" autocomplete="off" aria-label="Text Input" />
          <button id="recordButton" type="button" aria-label="To begin voice input press enter. To end and submit, press enter again">
            <i id="record-button-i" class="fas fa-microphone"></i>
            <p id="record-button-p" style="display: none;">Stop</p>
          </button>
          <button id="ask-question-button" type="submit" style="display: none;"></button>
        </div>
      </form>
    </div>

    <!-- Content loading and response display -->
    <div id="load-content" aria-live="assertive">
      <h3 id="load-status"></h3>
      <div id="response-info" style="display: none;" aria-live="polite">
        <p id="prompt"></p>
        <p id="response"></p>
      </div>
    </div>

    <!-- Container for subsequent suggestions -->
    <div id="subsequentSuggestionsContainer" style="display: none;">
      <div class="first-row">
        <div>
          <p>Try one of these questions instead.</p>
        </div>
      </div>
      <div class="two-columns">
        <div class="column">
          <button class="subsequentSuggestionButton">Button 1</button>
        </div>
        <div class="column">
          <button class="subsequentSuggestionButton">Button 2</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Import JavaScript files -->
  <script src="vegaLiteHandler.js" type="module"></script>
  <script src="main.js" type="module"></script>
  <script src="helperFunctions.js" type="module"></script>
  <script src="recordAudio.js" type="module"></script>
</body>

</html>
